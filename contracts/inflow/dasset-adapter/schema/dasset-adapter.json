{
  "contract_name": "dasset-adapter",
  "contract_version": "3.6.7",
  "idl_version": "1.0.0",
  "instantiate": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "InstantiateMsg",
    "type": "object",
    "required": [
      "initial_admins",
      "initial_depositors",
      "initial_executors"
    ],
    "properties": {
      "initial_admins": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "initial_depositors": {
        "description": "Initial depositors (e.g., vault addresses)",
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "initial_executors": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "initial_tokens": {
        "description": "Optional initial tokens to register",
        "default": [],
        "type": "array",
        "items": {
          "$ref": "#/definitions/TokenRegistration"
        }
      }
    },
    "additionalProperties": false,
    "definitions": {
      "TokenRegistration": {
        "description": "Token registration info used during instantiation",
        "type": "object",
        "required": [
          "base_asset_denom",
          "denom",
          "drop_staking_core",
          "drop_voucher",
          "drop_withdrawal_manager",
          "symbol"
        ],
        "properties": {
          "base_asset_denom": {
            "description": "Output denom, e.g., \"ibc/.../uatom\"",
            "type": "string"
          },
          "denom": {
            "description": "Full denom, e.g., \"factory/.../dATOM\"",
            "type": "string"
          },
          "drop_staking_core": {
            "type": "string"
          },
          "drop_voucher": {
            "type": "string"
          },
          "drop_withdrawal_manager": {
            "type": "string"
          },
          "symbol": {
            "description": "Human-readable key, e.g., \"datom\", \"dntrn\"",
            "type": "string"
          }
        },
        "additionalProperties": false
      }
    }
  },
  "execute": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "ExecuteMsg",
    "oneOf": [
      {
        "description": "Adapter interface entrypoint (Deposit, Withdraw, depositor management)",
        "type": "object",
        "required": [
          "standard_action"
        ],
        "properties": {
          "standard_action": {
            "$ref": "#/definitions/AdapterInterfaceMsg"
          }
        },
        "additionalProperties": false
      },
      {
        "description": "DAsset-specific logic",
        "type": "object",
        "required": [
          "custom_action"
        ],
        "properties": {
          "custom_action": {
            "$ref": "#/definitions/DAssetAdapterMsg"
          }
        },
        "additionalProperties": false
      }
    ],
    "definitions": {
      "AdapterInterfaceMsg": {
        "description": "Standard execute messages that all protocol adapters must implement",
        "oneOf": [
          {
            "description": "Deposit tokens into the protocol Only callable by whitelisted depositors The coin is sent in info.funds",
            "type": "object",
            "required": [
              "deposit"
            ],
            "properties": {
              "deposit": {
                "type": "object",
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Withdraw tokens from the protocol Only callable by whitelisted depositors The execution MUST fail if insufficient funds are available",
            "type": "object",
            "required": [
              "withdraw"
            ],
            "properties": {
              "withdraw": {
                "type": "object",
                "required": [
                  "coin"
                ],
                "properties": {
                  "coin": {
                    "description": "Coin (denom + amount) to withdraw",
                    "allOf": [
                      {
                        "$ref": "#/definitions/Coin"
                      }
                    ]
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Register new depositor address (admin only)",
            "type": "object",
            "required": [
              "register_depositor"
            ],
            "properties": {
              "register_depositor": {
                "type": "object",
                "required": [
                  "depositor_address"
                ],
                "properties": {
                  "depositor_address": {
                    "description": "New depositor address to register",
                    "type": "string"
                  },
                  "metadata": {
                    "description": "Optional adapter-specific metadata (e.g., capabilities) Serialized as Binary for flexibility",
                    "anyOf": [
                      {
                        "$ref": "#/definitions/Binary"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Unregister depositor address (admin only)",
            "type": "object",
            "required": [
              "unregister_depositor"
            ],
            "properties": {
              "unregister_depositor": {
                "type": "object",
                "required": [
                  "depositor_address"
                ],
                "properties": {
                  "depositor_address": {
                    "description": "Depositor address to unregister. The account should not have any funds deployed.",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Toggle depositor address as enabled/disabled (admin only)",
            "type": "object",
            "required": [
              "set_depositor_enabled"
            ],
            "properties": {
              "set_depositor_enabled": {
                "type": "object",
                "required": [
                  "depositor_address",
                  "enabled"
                ],
                "properties": {
                  "depositor_address": {
                    "description": "Depositor address to enable or disable",
                    "type": "string"
                  },
                  "enabled": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }
        ]
      },
      "Binary": {
        "description": "Binary is a wrapper around Vec<u8> to add base64 de/serialization with serde. It also adds some helper methods to help encode inline.\n\nThis is only needed as serde-json-{core,wasm} has a horrible encoding for Vec<u8>. See also <https://github.com/CosmWasm/cosmwasm/blob/main/docs/MESSAGE_TYPES.md>.",
        "type": "string"
      },
      "Coin": {
        "type": "object",
        "required": [
          "amount",
          "denom"
        ],
        "properties": {
          "amount": {
            "$ref": "#/definitions/Uint128"
          },
          "denom": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "DAssetAdapterMsg": {
        "oneOf": [
          {
            "description": "Executor-only: Initiate unbonding of dAsset tokens",
            "type": "object",
            "required": [
              "unbond_in_drop"
            ],
            "properties": {
              "unbond_in_drop": {
                "type": "object",
                "required": [
                  "symbol"
                ],
                "properties": {
                  "amount": {
                    "description": "Amount to unbond. None = unbond all available balance",
                    "anyOf": [
                      {
                        "$ref": "#/definitions/Uint128"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "symbol": {
                    "description": "Token symbol (e.g., \"datom\") to look up Drop contracts",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Executor-only: Withdraw base asset from Drop Protocol using NFT voucher",
            "type": "object",
            "required": [
              "withdraw_from_drop"
            ],
            "properties": {
              "withdraw_from_drop": {
                "type": "object",
                "required": [
                  "symbol",
                  "token_id"
                ],
                "properties": {
                  "symbol": {
                    "description": "Token symbol (e.g., \"datom\") to look up Drop contracts",
                    "type": "string"
                  },
                  "token_id": {
                    "description": "NFT voucher token ID from unbonding",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Admin-only: Register a new dAsset token with its Drop Protocol contracts",
            "type": "object",
            "required": [
              "register_token"
            ],
            "properties": {
              "register_token": {
                "type": "object",
                "required": [
                  "base_asset_denom",
                  "denom",
                  "drop_staking_core",
                  "drop_voucher",
                  "drop_withdrawal_manager",
                  "symbol"
                ],
                "properties": {
                  "base_asset_denom": {
                    "description": "Output denom, e.g., \"ibc/.../uatom\"",
                    "type": "string"
                  },
                  "denom": {
                    "description": "Full denom, e.g., \"factory/.../dATOM\"",
                    "type": "string"
                  },
                  "drop_staking_core": {
                    "type": "string"
                  },
                  "drop_voucher": {
                    "type": "string"
                  },
                  "drop_withdrawal_manager": {
                    "type": "string"
                  },
                  "symbol": {
                    "description": "Human-readable key, e.g., \"datom\"",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Admin-only: Unregister a dAsset token",
            "type": "object",
            "required": [
              "unregister_token"
            ],
            "properties": {
              "unregister_token": {
                "type": "object",
                "required": [
                  "symbol"
                ],
                "properties": {
                  "symbol": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Admin-only: Enable or disable a registered token",
            "type": "object",
            "required": [
              "set_token_enabled"
            ],
            "properties": {
              "set_token_enabled": {
                "type": "object",
                "required": [
                  "enabled",
                  "symbol"
                ],
                "properties": {
                  "enabled": {
                    "type": "boolean"
                  },
                  "symbol": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Admin-only: Add a single executor",
            "type": "object",
            "required": [
              "add_executor"
            ],
            "properties": {
              "add_executor": {
                "type": "object",
                "required": [
                  "executor_address"
                ],
                "properties": {
                  "executor_address": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Admin-only: Remove a single executor",
            "type": "object",
            "required": [
              "remove_executor"
            ],
            "properties": {
              "remove_executor": {
                "type": "object",
                "required": [
                  "executor_address"
                ],
                "properties": {
                  "executor_address": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }
        ]
      },
      "Uint128": {
        "description": "A thin wrapper around u128 that is using strings for JSON encoding/decoding, such that the full u128 range can be used for clients that convert JSON numbers to floats, like JavaScript and jq.\n\n# Examples\n\nUse `from` to create instances of this and `u128` to get the value out:\n\n``` # use cosmwasm_std::Uint128; let a = Uint128::from(123u128); assert_eq!(a.u128(), 123);\n\nlet b = Uint128::from(42u64); assert_eq!(b.u128(), 42);\n\nlet c = Uint128::from(70u32); assert_eq!(c.u128(), 70); ```",
        "type": "string"
      }
    }
  },
  "query": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "QueryMsg",
    "description": "Top-level query message wrapper for dAsset adapter",
    "oneOf": [
      {
        "description": "Standard adapter interface queries",
        "type": "object",
        "required": [
          "standard_query"
        ],
        "properties": {
          "standard_query": {
            "$ref": "#/definitions/AdapterInterfaceQueryMsg"
          }
        },
        "additionalProperties": false
      },
      {
        "description": "DAsset adapter-specific custom queries",
        "type": "object",
        "required": [
          "custom_query"
        ],
        "properties": {
          "custom_query": {
            "$ref": "#/definitions/DAssetAdapterQueryMsg"
          }
        },
        "additionalProperties": false
      }
    ],
    "definitions": {
      "AdapterInterfaceQueryMsg": {
        "description": "Standard query messages that all protocol adapters should support Note: QueryResponses derive is handled by each adapter's QueryMsg wrapper",
        "oneOf": [
          {
            "description": "Returns the maximum amount that can be deposited Accounts for protocol deposit caps and other limitations",
            "type": "object",
            "required": [
              "available_for_deposit"
            ],
            "properties": {
              "available_for_deposit": {
                "type": "object",
                "required": [
                  "denom",
                  "depositor_address"
                ],
                "properties": {
                  "denom": {
                    "type": "string"
                  },
                  "depositor_address": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Returns the amount available for immediate withdrawal for a specific denom",
            "type": "object",
            "required": [
              "available_for_withdraw"
            ],
            "properties": {
              "available_for_withdraw": {
                "type": "object",
                "required": [
                  "denom",
                  "depositor_address"
                ],
                "properties": {
                  "denom": {
                    "type": "string"
                  },
                  "depositor_address": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Returns estimated blocks/time required for withdrawal Returns 0 for instant withdrawals (like Mars lending)",
            "type": "object",
            "required": [
              "time_to_withdraw"
            ],
            "properties": {
              "time_to_withdraw": {
                "type": "object",
                "required": [
                  "coin",
                  "depositor_address"
                ],
                "properties": {
                  "coin": {
                    "$ref": "#/definitions/Coin"
                  },
                  "depositor_address": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Returns adapter configuration (adapter-specific response type)",
            "type": "object",
            "required": [
              "config"
            ],
            "properties": {
              "config": {
                "type": "object",
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Returns total positions across all depositors for all denoms",
            "type": "object",
            "required": [
              "all_positions"
            ],
            "properties": {
              "all_positions": {
                "type": "object",
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Returns list of registered depositors with their enabled status Optionally filter by enabled status (Some(true), Some(false), or None for all)",
            "type": "object",
            "required": [
              "registered_depositors"
            ],
            "properties": {
              "registered_depositors": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": [
                      "boolean",
                      "null"
                    ]
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Returns the current position for a specific depositor and denom When working with Inflow vaults, the position should not be included in the \"deployed\" amount as it will be included, together with the balance, in the total pool value calculation",
            "type": "object",
            "required": [
              "depositor_position"
            ],
            "properties": {
              "depositor_position": {
                "type": "object",
                "required": [
                  "denom",
                  "depositor_address"
                ],
                "properties": {
                  "denom": {
                    "type": "string"
                  },
                  "depositor_address": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Returns all positions for a specific depositor across all denoms",
            "type": "object",
            "required": [
              "depositor_positions"
            ],
            "properties": {
              "depositor_positions": {
                "type": "object",
                "required": [
                  "depositor_address"
                ],
                "properties": {
                  "depositor_address": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }
        ]
      },
      "Coin": {
        "type": "object",
        "required": [
          "amount",
          "denom"
        ],
        "properties": {
          "amount": {
            "$ref": "#/definitions/Uint128"
          },
          "denom": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "DAssetAdapterQueryMsg": {
        "description": "DAsset adapter-specific query messages",
        "oneOf": [
          {
            "description": "Query a specific token's configuration by symbol",
            "type": "object",
            "required": [
              "token_config"
            ],
            "properties": {
              "token_config": {
                "type": "object",
                "required": [
                  "symbol"
                ],
                "properties": {
                  "symbol": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Query all registered tokens",
            "type": "object",
            "required": [
              "all_tokens"
            ],
            "properties": {
              "all_tokens": {
                "type": "object",
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "description": "Query all executors",
            "type": "object",
            "required": [
              "executors"
            ],
            "properties": {
              "executors": {
                "type": "object",
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }
        ]
      },
      "Uint128": {
        "description": "A thin wrapper around u128 that is using strings for JSON encoding/decoding, such that the full u128 range can be used for clients that convert JSON numbers to floats, like JavaScript and jq.\n\n# Examples\n\nUse `from` to create instances of this and `u128` to get the value out:\n\n``` # use cosmwasm_std::Uint128; let a = Uint128::from(123u128); assert_eq!(a.u128(), 123);\n\nlet b = Uint128::from(42u64); assert_eq!(b.u128(), 42);\n\nlet c = Uint128::from(70u32); assert_eq!(c.u128(), 70); ```",
        "type": "string"
      }
    }
  },
  "migrate": null,
  "sudo": null,
  "responses": {
    "custom_query": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Binary",
      "description": "Binary is a wrapper around Vec<u8> to add base64 de/serialization with serde. It also adds some helper methods to help encode inline.\n\nThis is only needed as serde-json-{core,wasm} has a horrible encoding for Vec<u8>. See also <https://github.com/CosmWasm/cosmwasm/blob/main/docs/MESSAGE_TYPES.md>.",
      "type": "string"
    },
    "standard_query": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Binary",
      "description": "Binary is a wrapper around Vec<u8> to add base64 de/serialization with serde. It also adds some helper methods to help encode inline.\n\nThis is only needed as serde-json-{core,wasm} has a horrible encoding for Vec<u8>. See also <https://github.com/CosmWasm/cosmwasm/blob/main/docs/MESSAGE_TYPES.md>.",
      "type": "string"
    }
  }
}
